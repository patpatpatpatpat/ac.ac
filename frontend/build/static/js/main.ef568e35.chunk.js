(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){e.exports=a(250)},131:function(e,t,a){},135:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var n,r=a(2),l=a.n(r),i=a(114),s=a.n(i),o=(a(131),a(133),a(50)),c=a(15),u=a(16),h=a(20),m=a(17),d=a(19),p=a(7),b=(a(135),a(124)),f=a(8),g=a.n(f),v=(a(185),a(74)),C=a(118),O=a.n(C),E=a(255),j=a(252),S=a(254),y=a(253),k="https://167.99.66.195/";function T(e){localStorage.setItem("auth_token",e),n="Token "+e}var w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={app_name:"ACxAC",isLoggedIn:!1},a.makeLoggedIn=a.makeLoggedIn.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("auth_token");e&&(T(e),this.setState({isLoggedIn:!0}))}},{key:"makeLoggedIn",value:function(e){this.setState({isLoggedIn:!0})}},{key:"render",value:function(){return this.state.isLoggedIn?l.a.createElement("div",null,"Welcome!",l.a.createElement("hr",null),l.a.createElement("h6",null,"Search Client"),l.a.createElement(I,null),l.a.createElement("hr",null),l.a.createElement("h6",null,"Add Client"),l.a.createElement(A,null),l.a.createElement("hr",null),l.a.createElement("h6",null,"New Appointment"),l.a.createElement(D,null)):l.a.createElement(P,{makeLoggedIn:this.makeLoggedIn})}}]),t}(r.Component),N=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.client;return l.a.createElement("tr",null,l.a.createElement("td",null,e.first_name),l.a.createElement("td",null,e.contact_number))}}]),t}(l.a.Component),_=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.filterText,t=[];return this.props.clients.forEach(function(a){-1!==a.first_name.toLowerCase().indexOf(e)&&t.push(l.a.createElement(N,{client:a,key:a.uuid}))}),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Contact No."))),l.a.createElement("tbody",null,!!e&&t))}}]),t}(l.a.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).handleFilterTextChange=a.handleFilterTextChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleFilterTextChange",value:function(e){this.props.onFilterTextChange(e.target.value)}},{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("input",{type:"text",placeholder:"Search...",value:this.props.filterText,onChange:this.handleFilterTextChange}))}}]),t}(l.a.Component),I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={clients:[],filterText:""},e.handleFilterTextChange=e.handleFilterTextChange.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(k+"appointment/api/clients/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:n}}).then(function(e){return e.json()}).then(function(t){e.setState({clients:t})})}},{key:"handleFilterTextChange",value:function(e){this.setState({filterText:e})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(x,{filterText:this.state.filterText,onFilterTextChange:this.handleFilterTextChange}),l.a.createElement(_,{clients:this.state.clients,filterText:this.state.filterText}))}}]),t}(r.Component),F=w;function L(e){if(!e.ok)throw Error(e.statusText);return e}var D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={startDate:g()().add(1,"days"),client:"",notes:"",selectedServices:[],clientOptions:[],serviceOptions:[],tagOptions:[],error:!1,appointmentCreated:!1},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.handleClientChange=a.handleClientChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSelectedServicesChange=a.handleSelectedServicesChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSelectedTagsChange=a.handleSelectedTagsChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:n}};fetch(k+"appointment/api/clients/",t).then(function(e){return e.json()}).then(function(t){var a=t.map(function(e){return{value:e.id,label:e.first_name}});e.setState({clientOptions:a})}),fetch(k+"appointment/api/services/",t).then(function(e){return e.json()}).then(function(t){var a=t.map(function(e){return{value:e.uuid,label:e.name}});e.setState({serviceOptions:a})}),fetch(k+"appointment/api/tags/",t).then(function(e){return e.json()}).then(function(t){var a=t.map(function(e){return{value:e.id,label:e.name}});e.setState({tagOptions:a})})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={client:this.state.client,datetime:this.state.startDate,notes:this.state.notes,tags:this.state.tags,services:this.state.selectedServices},r={method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify(a)};fetch(k+"appointment/api/appointments/",r).then(L).then(function(e){console.log("app created"),t.setState({error:!1,appointmentCreated:!0,startDate:g()().add(1,"days"),notes:""})}).catch(function(e){t.setState({error:!0})})}},{key:"handleInputChange",value:function(e){if(e._isAMomentObject)this.setState({startDate:e});else{var t=e.target,a=t.value,n=t.name;this.setState(Object(o.a)({},n,a))}}},{key:"handleClientChange",value:function(e){var t=null===e?"":e.value;this.setState({client:t})}},{key:"handleSelectedServicesChange",value:function(e,t){var a=e.map(function(e){return e.value});this.setState({selectedServices:a})}},{key:"handleSelectedTagsChange",value:function(e){var t=e.map(function(e){return e.value});this.setState({tags:t})}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit,id:"appointmentForm"},this.state.appointmentCreated&&l.a.createElement("div",{className:"alert alert-success",role:"alert"},"Appointment created!"),this.state.error&&l.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please review errors below."),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"client"},"Client:"),l.a.createElement(v.a,{isClearable:!0,onChange:this.handleClientChange,options:this.state.clientOptions,name:"client",inputProps:{id:"client"}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"date"},"Date & Time:"),l.a.createElement(b.a,{id:"date",selected:this.state.startDate,onChange:this.handleInputChange,showTimeSelect:!0,timeIntervals:30,dateFormat:"LLL",timeCaption:"time",className:"form-control",minDate:g()(),minTime:g()().hours(7).minutes(0),maxTime:g()().hours(21).minutes(0),monthsShown:2})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"service"},"Services:"),l.a.createElement(v.a,{options:this.state.serviceOptions,onChange:this.handleSelectedServicesChange,name:"service",isMulti:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"tags"},"Tags:"),l.a.createElement(O.a,{isMulti:!0,options:this.state.tagOptions,onChange:this.handleSelectedTagsChange,inputProps:{id:"tags"}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"notes"},"Notes:"),l.a.createElement("textarea",{name:"notes",id:"notes",value:this.state.notes,onChange:this.handleInputChange,className:"form-control",placeholder:"Notes"})),l.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"}))}}]),t}(r.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={first_name:"",last_name:"",contact_number:"",clientCreated:!1,error:!1},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(o.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=JSON.stringify(this.state);fetch(k+"appointment/api/clients/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:a}).then(L).then(function(e){t.setState({clientCreated:!0,error:!1,first_name:"",last_name:"",contact_number:""})}).catch(function(e){t.setState({error:!0})})}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit},this.state.clientCreated&&l.a.createElement("div",{className:"alert alert-success",role:"alert"},"Client created!"),this.state.error&&l.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please review errors below."),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"first_name"},"First Name:"),l.a.createElement("input",{type:"text",name:"first_name",id:"first_name",value:this.state.first_name,onChange:this.handleInputChange,className:"form-control",placeholder:"Enter first name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"last_name"},"Last Name:"),l.a.createElement("input",{type:"text",name:"last_name",id:"last_name",value:this.state.last_name,onChange:this.handleInputChange,className:"form-control",placeholder:"Enter last name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"contact_number"},"Contact Number"),l.a.createElement("input",{type:"text",name:"contact_number",value:this.state.contact_number,onChange:this.handleInputChange,id:"contact_number",className:"form-control",placeholder:"Enter contact number"})),l.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"}))}}]),t}(r.Component),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(o.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(k+"auth/",n).then(L).then(function(e){return e.json()}).then(function(e){e.non_field_errors?a.setState({loginResult:e.non_field_errors[0]}):(T(e.token),a.props.makeLoggedIn())}).catch(function(e){a.setState({loginResult:"Something went wrong!"})})},a.state={username:"",password:"",loginResult:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"render",value:function(){return l.a.createElement("div",{className:"Login"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(E.a,{controlId:"username",bsSize:"large"},l.a.createElement(j.a,null,"Username"),l.a.createElement(S.a,{autoFocus:!0,type:"text",value:this.state.username,onChange:this.handleChange})),l.a.createElement(E.a,{controlId:"password",bsSize:"large"},l.a.createElement(j.a,null,"Password"),l.a.createElement(S.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),this.state.loginResult,l.a.createElement(y.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit"},"Login")))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[126,2,1]]]);
//# sourceMappingURL=main.ef568e35.chunk.js.map